---
export interface Props {
	title: string;
	description?: string;
}

const {title, description = "Track your Gloomhaven: Jaws of the Lion campaigns"} = Astro.props;
---

<style>
	@import "../styles/global.css";
</style>

<html lang='en' class='dark'>
	<head>
		<meta charset='UTF-8' />
		<meta name='description' content={description} />
		<meta name='viewport' content='width=device-width, initial-scale=1.0' />
		<link rel='icon' type='image/svg+xml' href='/favicon.svg' />
		<meta name='generator' content={Astro.generator} />
		<title>{title}</title>
	</head>
	<body class='min-h-screen bg-gray-900 text-gray-100'>
		<div class='flex flex-col min-h-screen'>
			<!-- Header -->
			<header class='bg-gray-800 border-b border-gray-700'>
				<div class='max-w-7xl mx-auto px-4 sm:px-6 lg:px-8'>
					<div class='flex justify-between items-center h-16'>
						<div class='flex items-center'>
							<a href='/' class='flex items-center space-x-2'>
								<div class='w-8 h-8 bg-gradient-to-br from-purple-600 to-blue-600 rounded-lg flex items-center justify-center'>
									<span class='text-white font-bold text-lg'>G</span>
								</div>
								<span class='text-xl font-bold text-white'>Gloomhaven Tracker</span>
							</a>
						</div>

						<nav class='hidden md:flex space-x-8'>
							<a href='/' class='text-gray-300 hover:text-white px-3 py-2 rounded-md text-sm font-medium transition-colors'> Dashboard </a>
							<a href='/campaigns' class='text-gray-300 hover:text-white px-3 py-2 rounded-md text-sm font-medium transition-colors'> Campaigns </a>
							<a href='/characters' class='text-gray-300 hover:text-white px-3 py-2 rounded-md text-sm font-medium transition-colors'> Characters </a>
							<a href='/scenarios' class='text-gray-300 hover:text-white px-3 py-2 rounded-md text-sm font-medium transition-colors'> Scenarios </a>
						</nav>

						<!-- Mobile menu button -->
						<div class='md:hidden'>
							<button type='button' class='text-gray-400 hover:text-white focus:outline-none focus:text-white' id='mobile-menu-button'>
								<svg class='h-6 w-6' fill='none' viewBox='0 0 24 24' stroke='currentColor'>
									<path stroke-linecap='round' stroke-linejoin='round' stroke-width='2' d='M4 6h16M4 12h16M4 18h16'></path>
								</svg>
							</button>
						</div>
					</div>
				</div>

				<!-- Mobile menu -->
				<div class='md:hidden hidden' id='mobile-menu'>
					<div class='px-2 pt-2 pb-3 space-y-1 sm:px-3 bg-gray-800 border-t border-gray-700'>
						<a href='/' class='text-gray-300 hover:text-white block px-3 py-2 rounded-md text-base font-medium'> Dashboard </a>
						<a href='/campaigns' class='text-gray-300 hover:text-white block px-3 py-2 rounded-md text-base font-medium'> Campaigns </a>
						<a href='/characters' class='text-gray-300 hover:text-white block px-3 py-2 rounded-md text-base font-medium'> Characters </a>
						<a href='/scenarios' class='text-gray-300 hover:text-white block px-3 py-2 rounded-md text-base font-medium'> Scenarios </a>
					</div>
				</div>
			</header>

			<!-- Main content -->
			<main class='flex-1'>
				<slot />
			</main>

			<!-- Footer -->
			<footer class='bg-gray-800 border-t border-gray-700'>
				<div class='max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6'>
					<div class='text-center text-gray-400 text-sm'>
						<p>Gloomhaven: Jaws of the Lion Campaign Tracker</p>
						<p class='mt-1'>Track your adventures across multiple groups</p>
					</div>
				</div>
			</footer>
		</div>

		<script>
			// Mobile menu toggle
			document.addEventListener("DOMContentLoaded", () => {
				const mobileMenuButton = document.getElementById("mobile-menu-button");
				const mobileMenu = document.getElementById("mobile-menu");

				if (mobileMenuButton && mobileMenu) {
					mobileMenuButton.addEventListener("click", () => {
						mobileMenu.classList.toggle("hidden");
					});
				}

				// Initialize campaigns data on client side
				if (typeof window !== "undefined") {
					// Load campaigns from localStorage if available
					try {
						const saved = localStorage.getItem("gloomhaven-campaigns");
						if (saved) {
							// Store in a global variable for client-side access
							(window as any).gloomhavenCampaigns = JSON.parse(saved);
						}
					} catch (error) {
						console.warn("Failed to load campaigns on client:", error);
					}
				}
			});
		</script>
	</body>
</html>
