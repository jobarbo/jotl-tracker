---
import Card from "./Card.astro";
import Button from "./Button.astro";
import type {Character} from "../types/index.js";

export interface Props {
	character: Character & {campaignName?: string; campaignId?: string};
	showCampaignInfo?: boolean;
	showActions?: boolean;
}

const {character, showCampaignInfo = false, showActions = true} = Astro.props;
---

<Card variant='hover' class='transition-all duration-200 hover:shadow-lg'>
	<!-- Character Header -->
	<div class='border-b border-gray-700 mb-4 pb-4'>
		<div class='flex justify-between items-start'>
			<div>
				<h3 class='text-xl font-semibold text-white'>{character.name}</h3>
				<p class='text-gray-400'>
					{character.class.symbol}
					{character.class.name} - Level {character.level}
				</p>
				{showCampaignInfo && character.campaignName && <span class='inline-block text-xs text-gray-400 bg-gray-700 px-2 py-1 rounded mt-2'>{character.campaignName}</span>}
			</div>
			<div class='text-right text-sm text-gray-400'>
				<div>{character.experience} XP</div>
				<div>{character.gold} Gold</div>
			</div>
		</div>
	</div>

	<!-- Character Stats -->
	<div class='grid grid-cols-2 gap-4 mb-4'>
		<div class='text-center'>
			<div class='text-xl font-bold text-white'>{character.experience}</div>
			<div class='text-sm text-gray-400'>Experience</div>
		</div>
		<div class='text-center'>
			<div class='text-xl font-bold text-white'>{character.gold}</div>
			<div class='text-sm text-gray-400'>Gold</div>
		</div>
	</div>

	<div class='space-y-2 mb-4'>
		<div class='flex justify-between text-sm'>
			<span class='text-gray-400'>Checkmarks:</span>
			<span class='text-white'>{character.checkmarks}</span>
		</div>
		<div class='flex justify-between text-sm'>
			<span class='text-gray-400'>Perks:</span>
			<span class='text-white'>{character.perks.length}</span>
		</div>
		<div class='flex justify-between text-sm'>
			<span class='text-gray-400'>Items:</span>
			<span class='text-white'>{character.items.length}</span>
		</div>
	</div>

	{
		showActions && (
			<div class='flex space-x-2'>
				{character.campaignId && (
					<Button href={`/campaigns/${character.campaignId}`} variant='primary' size='sm' class='flex-1 text-center'>
						View Campaign
					</Button>
				)}
				<Button variant='secondary' size='sm' class='flex-1'>
					Edit Character
				</Button>
			</div>
		)
	}
</Card>
